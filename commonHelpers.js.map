{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getPixabay(userQuery, currentPage) {\n  const url = 'https://pixabay.com/api/';\n\n  const params = {\n    key: '43152817-de47b6f1b37f4fad093212301',\n    q: userQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export default function renderInput(posts) {\n  return posts\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `    \n    <li class=\"retrieved-search-element\">\n      <a href=\"${largeImageURL}\"><img class=\"img-element\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"></a>\n      <ul class=\"menu\">\n        <li class=\"menu-item\">\n          <h4 class=\"menu-item-text-bold\">Likes</h4>\n          <p class=\"menu-item-text\">${likes}</p>\n        </li>\n        <li class=\"menu-item\">\n          <h4 class=\"menu-item-text-bold\">Views</h4>\n          <p class=\"menu-item-text\">${views}</p>\n        </li>\n        <li class=\"menu-item\">\n          <h4 class=\"menu-item-text-bold\">Comments</h4>\n          <p class=\"menu-item-text\">${comments}</p>\n        </li>\n        <li class=\"menu-item\">\n          <h4 class=\"menu-item-text-bold\">Downloads</h4>\n          <p class=\"menu-item-text\">${downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n      }\n    )\n    .join('');\n}\n","import getPixabay from './js/pixabay-api';\nimport renderInput from './js/render-functions';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = {\n  form: document.querySelector('.search-form'),\n  ul: document.querySelector('.flex-container'),\n  load: document.querySelector('.loader'),\n  btn: document.querySelector('.btn-load-more'),\n};\n\nlet user;\nlet page = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nsearchForm.form.addEventListener('submit', handleSubmit);\nsearchForm.btn.addEventListener('click', onLoadMoreClick);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  user = event.target.query.value.trim();\n  if (user) {\n    try {\n      page = 1;\n      searchForm.ul.innerHTML = '';\n      showLoader();\n      hideBtnLadMore();\n      const data = await getPixabay(user, page);\n\n      if (data.hits.length !== 0) {\n        maxPage = Math.ceil(data.totalHits / pageSize);\n\n        const markup = renderInput(data.hits);\n\n        searchForm.ul.insertAdjacentHTML('beforeend', markup);\n\n        new SimpleLightbox('.flex-container a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        }).refresh();\n      } else {\n        iziToastIcon(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        hideLoader();\n        return searchForm.form.reset();\n      }\n    } catch (error) {\n      iziToastIcon(`${error}`);\n    }\n\n    hideLoader();\n    showBtnLadMore();\n    return searchForm.form.reset();\n  } else {\n    iziToastIcon('Please enter the text');\n    return searchForm.form.reset();\n  }\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  hideBtnLadMore();\n  showLoader();\n  try {\n    const data = await getPixabay(user, page);\n    const markup = renderInput(data.hits);\n\n    searchForm.ul.insertAdjacentHTML('beforeend', markup);\n\n    new SimpleLightbox('.flex-container a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    }).refresh();\n  } catch (error) {\n    iziToastIcon(`${error}`);\n  }\n\n  browserScroll();\n\n  hideLoader();\n  showBtnLadMore();\n  checkBtnStatus();\n}\n\n// Винесення в окрему функцію виїджаючого попередження\nfunction iziToastIcon(text) {\n  return iziToast.show({\n    backgroundColor: '#ef4040',\n    messageColor: 'white',\n    messageSize: '16px',\n    position: 'topRight',\n    message: text,\n    close: false,\n  });\n}\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n    hideBtnLadMore();\n    iziToastIcon(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    showBtnLadMore();\n  }\n}\n\nfunction showLoader() {\n  searchForm.load.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  searchForm.load.classList.add('hidden');\n}\n\nfunction showBtnLadMore() {\n  searchForm.btn.classList.remove('hidden');\n}\n\nfunction hideBtnLadMore() {\n  searchForm.btn.classList.add('hidden');\n}\n\nfunction browserScroll() {\n  const firstCard = searchForm.ul.querySelector('.retrieved-search-element');\n\n  const height = firstCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getPixabay","userQuery","currentPage","url","params","axios","renderInput","posts","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","user","page","maxPage","pageSize","handleSubmit","onLoadMoreClick","event","showLoader","hideBtnLadMore","data","markup","SimpleLightbox","iziToastIcon","hideLoader","error","showBtnLadMore","browserScroll","checkBtnStatus","text","iziToast","height"],"mappings":"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"}